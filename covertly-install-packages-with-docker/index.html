<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8" />
    <meta name="author" content="Elijah Voigt">
    <link rel="stylesheet" type="text/css" href="../theme/css/styles.css"/>
        <link href="/rss.xml" type="application/rss+xml"   rel="alternate" title="elijahcaine.me RSS Feed" />
        <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="elijahcaine.me Atom Feed" />
  </head>

  <body>
    <div class="site">
      <header>
        <a href="/">(🏠 elijahcaine.me)</a>
        <a href="https://github.com/pop/">(🐙 github 🐱)</a>
        <a href="/Elijah Voigt.pdf">(👔 resume)</a>
        <a href="/atom.xml">(📰 feed)</a>
      </header>

      <div id="content">

<div class="post">
  <h1 class="posttitle">
    Covertly Installing Packages with Docker
  </h1>

  <div class="postinfo">
    <p class="published" title="2015-10-07T00:00:00-07:00">
      Wed 07 October 2015
    </p>
  </div>
</div>

<div class="article">
  <p><a class="reference external" href="#the-deets-dockerfile-and-commands">Jump to the codey bits</a></p>
<div class="section" id="the-problem-workstations">
<h2>The Problem: Workstations</h2>
<p>At the OSL I use workstations which are provisioned by <a class="reference external" href="https://en.wikipedia.org/wiki/Chef_%28software%29">Chef</a> to look more or
less identical (packages are the same and global config files are consistent
from machine to machine). This is nice because it allows everybody at the lab
to jump from workstation to workstation without dreading the inevitable setup
that usually comes with going to a new computer.</p>
<p>The only downside here is that to install a package you have to make a pull
request to a GitHub Repository in which you modify a JSON file. This is almost
always for my own good, but as a dev I am prone to avoiding things that the
admins say are good for me (like broccoli, milk, and consistent workstation
environments).</p>
<p>For instance, yesterday I wanted to use <a class="reference external" href="http://rg3.github.io/youtube-dl/">youtube-dl</a> to grab a video I was
watching on repeat*. I could have made a pull request to add the package,
waited until 30 after for the workstations to refresh, used the package, and
went about my day. This would have been the correct and bureaucratic way to do
things.</p>
<p>I <em>could</em> have, and probably <em>should</em> have, done that... but I didn't.</p>
<p>* firefox kept crashing, I wasn't just stealing music for the sake of it.</p>
</div>
<div class="section" id="enter-docker">
<h2>Enter: Docker</h2>
<p>In this case the solution to the 'problem' was <a class="reference external" href="https://en.wikipedia.org/wiki/Docker_%28software%29">Docker</a>. I wrote a Dockerfile
which provisioned a container to have <tt class="docutils literal"><span class="pre">youtube-dl</span></tt> installed, spun up the
container with a shared directory (<tt class="docutils literal"><span class="pre">$PWD:/home/</span></tt>), and executed the
youtube-dl command. The .mp4 video was downloaded to my current working
directory and I was able to play it with my media player of choice, all without
installing <tt class="docutils literal"><span class="pre">youtube-dl</span></tt> locally.</p>
</div>
<div class="section" id="the-deets-dockerfile-and-commands">
<h2>The Deets: Dockerfile and Commands</h2>
<p><tt class="docutils literal">Dockerfile</tt></p>
<div class="highlight"><pre><span></span>FROM ubuntu:latest

RUN apt-get -y update
RUN apt-get -y upgrade
RUN apt-get -y install python-pip
RUN pip install youtube-dl

WORKDIR /home
RUN alias youtube-dl=&#39;/usr/local/bin/youtube-dl&#39;
</pre></div>
<p>If you are in the directory containing the above Dockerfile, build the
container with:</p>
<div class="highlight"><pre><span></span>$ docker build -t yt-dl .
</pre></div>
<p>and run it with:</p>
<div class="highlight"><pre><span></span>$ docker run -v $PWD:/home/ yt-dl youtube-dl &lt;YOUTUBE-VID-URL&gt;
</pre></div>
<p>This will download any url's video into the current working directory.</p>
</div>
<div class="section" id="pro-tip-add-an-alias">
<h2>Pro-Tip: Add an <tt class="docutils literal">Alias</tt></h2>
<p>Add the following content to your <tt class="docutils literal"><span class="pre">~/.bashrc</span></tt> file and then run <tt class="docutils literal">source
<span class="pre">~/.bashrc</span></tt> to get rid the of long Docker bits of the above command.</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">$VID_DIR</span><span class="o">=</span>/path/to/downloaded/videos/
<span class="nb">alias</span> yt-dl<span class="o">=</span><span class="s1">&#39;docker run -v $VID_DIR:/home/ yt-dl youtube-dl&#39;</span>
</pre></div>
</div>
<div class="section" id="wait-this-is-overly-complicated">
<h2>Wait This is Overly Complicated</h2>
<p>You're probably thinking: &quot;Hey, couldn't you have just run <tt class="docutils literal">pip install <span class="pre">--user</span>
<span class="pre">youtube-dl</span></tt>?</p>
<p>Yes. I could have. But that wouldn't be fun and wouldn't have given me an
excuse to write a blog, post now would it Ms. Smarty Pantz.</p>
<hr class="docutils" />
<p><strong>drink the coolaid. come to the docker side.</strong></p>
</div>

</div>


      </div>

      <footer>
        <p>
        © 2024 Elijah Voigt, <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="/assets/images/CCA4IL.png" /> Creative Commons Attribution 4.0 International</a>.
        </p>
        <p>
        This website made with locally sourced bits, built with Python 🐍 via Pelican 🐦, developed on Fedora 👒 GNU/Linux 🐃🐧, <a href='https://github.com/pop/elijahcaine.me'>hosted</a> and deployed on GitHub 🐙🐱, and served from clouds ⛅.
        </p>
      </footer>
    </div>
  </body>
</html>